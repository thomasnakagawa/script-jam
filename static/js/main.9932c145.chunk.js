(this.webpackJsonplofi=this.webpackJsonplofi||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/KICK1.226fbf2c.wav"},30:function(e,t,n){e.exports=n.p+"static/media/HIHAT1.7cb09c75.wav"},31:function(e,t,n){e.exports=n.p+"static/media/SNARE4.3efa79aa.wav"},32:function(e,t,n){e.exports=n.p+"static/media/synth_note.3c1ccfc4.ogg"},33:function(e,t,n){e.exports=n.p+"static/media/synth2.3fb56212.ogg"},36:function(e,t,n){e.exports=n(58)},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(12),i=n.n(s),c=n(2),o=n(7),l=n(1),u=n(18),d=["q\n e\nd\n s\n s\nd f \nd  d\n 1","t  u\n y\nt  g\n j \nt  u\n 5\ng   j\n k "],y=0;function h(){var e=d[y];return y=(y+1)%d.length,e}var p=n(5),f=Object(o.b)({tracks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{code:h()}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TRACK":return[].concat(Object(u.a)(e),[{code:h()}]);case"REMOVE_TRACK":return[].concat(Object(u.a)(e.slice(0,t.index)),Object(u.a)(e.slice(t.index+1)));case"EDIT_TRACK_CODE":return e.map((function(e,n){return n===t.index?Object(l.a)({},e,{code:t.newCode}):e}));case"EDIT_TRACK_CURSOR":return e.map((function(e,n){return n===t.index?Object(l.a)({},e,{showHighlight:t.showHighlight,lineHighlight:t.lineHighlight,charHighlight:t.charHighlight}):e}));default:return e}},playback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isPlaying:!1,tempo:120,trackPlayLine:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_PLAYBACK":return Object(l.a)({},e,{isPlaying:!0});case"STOP_PLAYBACK":return Object(l.a)({},e,{isPlaying:!1,trackPlayLine:{}});case"SET_TEMPO":return Object(l.a)({},e,{tempo:t.tempo});case"SET_TRACK_PLAYING_LINE":return Object(l.a)({},e,{trackPlayLine:Object(l.a)({},e.trackPlayLine,Object(p.a)({},t.trackIndex,t.line))});default:return e}},keys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userKeys:{},scriptKeys:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_KEY_PRESSED":return Object(l.a)({},e,{userKeys:Object(l.a)({},e.userKeys,Object(p.a)({},t.key,t.isPressed))});case"SET_SCRIPT_KEY_PRESSED":return Object(l.a)({},e,{scriptKeys:Object(l.a)({},e.scriptKeys,Object(p.a)({},t.key,t.isPressed))});case"CLEAR_PRESSED_KEYS":return{userKeys:{},scriptKeys:{}};default:return e}}});n(45),n(46),n(47),n(48),n(49);var k=Object(c.b)((function(e){return{isPlaying:e.playback.isPlaying}}),(function(e){return{startPlayback:function(){return e({type:"START_PLAYBACK"})},stopPlayback:function(){return e({type:"STOP_PLAYBACK"})}}}))((function(e){return a.a.createElement("div",{className:"header-section"},a.a.createElement("h1",null,"Beat text thing"),a.a.createElement("button",{onClick:e.isPlaying?e.stopPlayback:e.startPlayback},e.isPlaying?"stop":"play"))})),g=n(35),v=n(29),m=n.n(v),b=n(30),E=n.n(b),K=n(31),P=n.n(K),C=n(32),O=n.n(C),j=n(33),w=n.n(j),S=n(8),T=n.n(S),_=n(3),H=function(e){return Math.pow(2,e/12)},R=[H(-12),H(-10),H(-9),H(-7),H(-5),H(-4),H(-2),H(-1),H(0),H(2),H(3),H(5),H(7),H(8),H(10),H(11)],A=new T.a.Sound(O.a,(function(){})),I=new T.a.Sound(w.a,(function(){})),D=new T.a.Sound(m.a,(function(){})),L=new T.a.Sound(P.a,(function(){})),N=new T.a.Sound(E.a,(function(){})),x=["z","x","c","v","a","s","d","f","q","w","e","r","1","2","3","4"],U=["b","n","m",",","g","h","j","k","t","y","u","i","5","6","7","8"];function M(e,t){e.stop(),e.attack=0,e.play(),e.sourceNode.playbackRate.value=t||1}var Y=function(e){if(e&&" "!==e){var t=Object(_.indexOf)(x,e),n=Object(_.indexOf)(U,e);if(-1!==t)M(A,R[t]);else if(-1!==n)M(I,R[n]);else{var r=e.charCodeAt(0);M((r-1)%4===0?D:r%4===0?L:N,1+Math.floor(r/30))}}};function B(e){return a.a.createElement("div",{className:"Keypad"},e.keyRows.map((function(t,n){return a.a.createElement("div",{key:t,className:"row"},t.map((function(t,n){return a.a.createElement(V,{keyClass:e.keyClass,key:n,keyName:t,isPressed:!!e.userKeys[t],isVirtuallyPressed:!!e.scriptKeys[t],onClickDown:e.onKeyDown.bind(null,t),onClickUp:e.onKeyUp.bind(null,t)})})))})))}function V(e){var t=Object(r.useState)(!1),n=Object(g.a)(t,2),s=n[0],i=n[1];return a.a.createElement("div",{className:"drum-pad"+(e.isPressed||s?" pressed":"")+(e.isVirtuallyPressed?" virtual-pressed":"")+" "+(e.keyName?e.keyClass:"spacer"),onMouseDown:function(){e.onClickDown(),i(!0),Y(e.keyName)},onMouseUp:function(){e.onClickUp(),i(!1)}},a.a.createElement("p",null,e.keyName))}var q=function(e,t){return{type:"SET_USER_KEY_PRESSED",key:e,isPressed:t}},z=["z","x","c","v","a","s","d","f","q","w","e","r","1","2","3","4"],G=["b","n","m",",","g","h","j","k","t","y","u","i","5","6","7","8"],J=[".","/",null,null,"l",";","'",null,"o","p","[","]","9","0","-","="];var W=Object(c.b)((function(e){return{userKeys:e.keys.userKeys,scriptKeys:e.keys.scriptKeys}}),(function(e){return{setUserKeyPressed:function(t,n){return e(q(t,n))}}}))((function(e){return a.a.createElement("div",{className:"keys-section"},a.a.createElement(B,{keyClass:"bass",keyRows:Object(_.reverse)(Object(_.chunk)(z,4)),onKeyDown:function(t){return e.setUserKeyPressed(t,!0)},onKeyUp:function(t){return e.setUserKeyPressed(t,!1)},userKeys:e.userKeys,scriptKeys:e.scriptKeys}),a.a.createElement(B,{keyClass:"lead",keyRows:Object(_.reverse)(Object(_.chunk)(G,4)),onKeyDown:function(t){return e.setUserKeyPressed(t,!0)},onKeyUp:function(t){return e.setUserKeyPressed(t,!1)},userKeys:e.userKeys,scriptKeys:e.scriptKeys}),a.a.createElement(B,{keyClass:"drum",keyRows:Object(_.reverse)(Object(_.chunk)(J,4)),onKeyDown:function(t){return e.setUserKeyPressed(t,!0)},onKeyUp:function(t){return e.setUserKeyPressed(t,!1)},userKeys:e.userKeys,scriptKeys:e.scriptKeys}))}));var X=Object(c.b)((function(e){return{userKeys:e.keys.userKeys,isPlaying:e.playback.isPlaying}}),(function(e){return{onKeyDown:function(t){return e(q(t,!0))},onKeyUp:function(t){return e(q(t,!1))}}}))((function(e){function t(t){e.isPlaying&&"TEXTAREA"===document.activeElement.tagName||(e.onKeyDown(t.key),Y(t.key))}function n(t){e.isPlaying&&"TEXTAREA"===document.activeElement.tagName||e.onKeyUp(t.key)}return Object(r.useEffect)((function(){return document.addEventListener("keydown",t),document.addEventListener("keyup",n),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",n)}})),null})),$=n(14),F=n(15),Q=n(4),Z=n(16),ee=n(17),te=n(34),ne=n.n(te),re=(n(56),n(57),function(e){Object(ee.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object($.a)(this,n),(r=t.call(this,e)).getMarkers=r.getMarkers.bind(Object(Q.a)(r)),r}return Object(F.a)(n,[{key:"getMarkers",value:function(){return[{startRow:this.props.lineHighlight,endRow:this.props.lineHighlight,startCol:this.props.charHighlight,endCol:this.props.charHighlight+1,className:this.props.showHighlight?"line-highlight":"",type:"background"}]}},{key:"render",value:function(){return a.a.createElement("div",{className:"text-editor"},a.a.createElement("div",{className:"text-editor-header"},a.a.createElement("button",{onClick:this.props.onCloseButtonClicked,disabled:!this.props.canClose},"x")),a.a.createElement(ne.a,{style:{width:"100%",height:"100%"},value:this.props.code,mode:"java",theme:"github",onChange:this.props.onCodeChanged,name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},markers:this.getMarkers()}))}}]),n}(r.Component));var ae=Object(c.b)((function(e){return{tracks:e.tracks}}),(function(e){return{addTrack:function(){return e({type:"ADD_TRACK"})},removeTrack:function(t){return e(function(e){return{type:"REMOVE_TRACK",index:e}}(t))},editTrackCode:function(t,n){return e(function(e,t){return{type:"EDIT_TRACK_CODE",index:e,newCode:t}}(t,n))}}}))((function(e){return a.a.createElement("div",{className:"editor-section"},a.a.createElement("div",{className:"editor-section-header"},a.a.createElement("button",{onClick:e.addTrack},"Add track")),a.a.createElement("div",{className:"editor-sections-tabs"},(e.tracks||[]).map((function(t,n){return a.a.createElement(re,{key:n,canClose:e.tracks.length>1,onCloseButtonClicked:function(){return e.removeTrack(n)},code:t.code,onCodeChanged:function(t){return e.editTrackCode(n,t)},lineHighlight:t.lineHighlight,charHighlight:t.charHighlight,showHighlight:t.showHighlight})}))))})),se=function(e){Object(ee.a)(n,e);var t=Object(Z.a)(n);function n(e){var r;return Object($.a)(this,n),(r=t.call(this,e)).state={lineInterval:null,charIntervals:[],lastPressedKeys:[]},r.HandlePlay=r.HandlePlay.bind(Object(Q.a)(r)),r.HandleStop=r.HandleStop.bind(Object(Q.a)(r)),r.HandleLine=r.HandleLine.bind(Object(Q.a)(r)),r.HandleChar=r.HandleChar.bind(Object(Q.a)(r)),r}return Object(F.a)(n,[{key:"componentDidUpdate",value:function(e){!e.isPlaying&&this.props.isPlaying&&this.HandlePlay(),e.isPlaying&&!this.props.isPlaying&&this.HandleStop()}},{key:"HandlePlay",value:function(){var e=this;this.setState({charIntervals:new Array(this.props.tracks.length),lastPressedKeys:new Array(this.props.tracks.length),lineInterval:setInterval(this.HandleLine,6e4/this.props.tempo)},(function(){e.HandleLine()}))}},{key:"HandleStop",value:function(){clearInterval(this.state.lineInterval),this.state.charIntervals.forEach((function(e){return clearInterval(e)})),this.setState({charIntervals:[],lineInterval:null}),this.props.clearPressedKeys()}},{key:"HandleLine",value:function(){var e=this;this.props.tracks.forEach((function(t,n){e.state.charIntervals[n]&&clearInterval(e.state.charIntervals[n]);var r=e.props.playingLines[n]||0,a=t.code.split(/\r\n|\r|\n/),s=a[r||0];if(s&&s.length>0&&(e.HandleChar(s.charAt(0),n),e.props.setTrackCursor(n,!0,r,0),s.length>1)){var i=e.state.charIntervals.slice(),c=1;i[n]=setInterval((function(){e.HandleChar(s.charAt(c),n),e.props.setTrackCursor(n,!0,r,c),c+=1}),6e4/e.props.tempo/s.length),e.setState({charIntervals:i})}var o=(r+1)%a.length;e.props.setTrackPlayingLine(n,o)}))}},{key:"HandleChar",value:function(e,t){this.state.lastPressedKeys[t]&&this.props.setScriptKeyPressed(this.state.lastPressedKeys[t],!1),this.props.setScriptKeyPressed(e,!0),Y(e);var n=this.state.lastPressedKeys.slice();n[t]=e,this.setState({lastPressedKeys:n})}},{key:"render",value:function(){return null}}]),n}(r.Component),ie=Object(c.b)((function(e){return{tracks:e.tracks,playingLines:e.playback.trackPlayLine,isPlaying:e.playback.isPlaying,tempo:e.playback.tempo}}),(function(e){return{setTrackPlayingLine:function(t,n){return e(function(e,t){return{type:"SET_TRACK_PLAYING_LINE",trackIndex:e,line:t}}(t,n))},setTrackCursor:function(t,n,r,a){return e(function(e,t,n,r){return{type:"EDIT_TRACK_CURSOR",index:e,lineHighlight:n,charHighlight:r,showHighlight:t}}(t,n,r,a))},setScriptKeyPressed:function(t,n){return e(function(e,t){return{type:"SET_SCRIPT_KEY_PRESSED",key:e,isPressed:t}}(t,n))},clearPressedKeys:function(){return e({type:"CLEAR_PRESSED_KEYS"})}}}))(se);var ce=function(e){return a.a.createElement("div",{className:"App"},a.a.createElement(k,null),a.a.createElement(W,null),a.a.createElement(ae,null),a.a.createElement(X,null),a.a.createElement(ie,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(c.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.c)(f,e)}()},a.a.createElement(a.a.StrictMode,null,a.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.9932c145.chunk.js.map