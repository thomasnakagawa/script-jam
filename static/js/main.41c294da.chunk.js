(this.webpackJsonplofi=this.webpackJsonplofi||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/KICK1.226fbf2c.wav"},23:function(e,t,n){e.exports=n.p+"static/media/HIHAT1.7cb09c75.wav"},24:function(e,t,n){e.exports=n.p+"static/media/SNARE4.3efa79aa.wav"},25:function(e,t,n){e.exports=n.p+"static/media/synth_note.3c1ccfc4.ogg"},26:function(e,t,n){e.exports=n.p+"static/media/synth2.3fb56212.ogg"},27:function(e,t,n){e.exports=n(44)},32:function(e,t,n){},33:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(20),l=n.n(s),i=(n(32),n(2));n(33);function o(e){return r.a.createElement("div",{className:"Keypad"},e.keyRows.map((function(t,n){return r.a.createElement("div",{key:t,className:"row"},t.map((function(t,n){return r.a.createElement(c,{key:n,keyName:t,isPressed:!!e.pressedKeys[t],isVirtuallyPressed:!!e.virtualKeys.includes(t),onClickDown:e.onUIClickDown.bind(null,t),onClickUp:e.onUIClickUp.bind(null,t)})})))})))}function c(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),s=n[0],l=n[1];return r.a.createElement("div",{className:"drum-pad"+(e.isPressed||s?" pressed":"")+(e.isVirtuallyPressed?" virtual-pressed":""),onMouseDown:function(){e.onClickDown(),l(!0)},onMouseUp:function(){e.onClickUp(),l(!1)}},r.a.createElement("p",null,e.keyName))}var u=n(10),h=n(13),p=n(4),y=n(5),d=n(1),v=n(6),b=n(7),f=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={pressedKeys:{}},a.handleKeyPress=a.handleKeyPress.bind(Object(d.a)(a)),a.handleKeyRelease=a.handleKeyRelease.bind(Object(d.a)(a)),a.handleUIClickDown=a.handleUIClickDown.bind(Object(d.a)(a)),a.handleUIClickUp=a.handleUIClickUp.bind(Object(d.a)(a)),a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyPress),document.addEventListener("keyup",this.handleKeyRelease)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress),document.removeEventListener("keyup",this.handleKeyRelease)}},{key:"handleKeyPress",value:function(e){this.state.pressedKeys[e.key]||(this.props.onKeyDown(e.key),this.setState({pressedKeys:Object(h.a)({},this.state.pressedKeys,Object(u.a)({},e.key,!0))}))}},{key:"handleKeyRelease",value:function(e){this.props.onKeyUp(e.key),this.setState({pressedKeys:Object(h.a)({},this.state.pressedKeys,Object(u.a)({},e.key,!1))})}},{key:"handleUIClickDown",value:function(e){this.props.onKeyDown(e)}},{key:"handleUIClickUp",value:function(e){this.props.onKeyUp(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.Children.map(this.props.children,(function(t){return r.a.cloneElement(t,{pressedKeys:e.state.pressedKeys,virtualKeys:e.props.virtualKeys,onUIClickDown:e.handleUIClickDown,onUIClickUp:e.handleUIClickUp})})))}}]),n}(r.a.Component),k=n(8);function m(e){return r.a.createElement("div",{className:"Sampler"},r.a.createElement(f,{onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,virtualKeys:e.virtualKeys},r.a.createElement(o,{keyRows:Object(k.reverse)(Object(k.chunk)(e.playableKeys,4))})))}var K=n(21),O=n.n(K),g=(n(41),n(42),function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).getMarkers=a.getMarkers.bind(Object(d.a)(a)),a}return Object(y.a)(n,[{key:"getMarkers",value:function(){return console.log(this.props.markerConfig),[{startRow:this.props.markerConfig.line,endRow:this.props.markerConfig.line,startCol:this.props.markerConfig.char,endCol:this.props.markerConfig.char+1,className:this.props.markerConfig.show?"line-highlight":"",type:"background"}]}},{key:"render",value:function(){return r.a.createElement(O.a,{value:this.props.code,mode:"java",theme:"github",onChange:this.props.onCodeChange,name:"UNIQUE_ID_OF_DIV",editorProps:{$blockScrolling:!0},markers:this.getMarkers()})}}]),n}(a.Component)),j=n(22),I=n.n(j),w=n(23),C=n.n(w),E=n(24),U=n.n(E),S=n(25),P=n.n(S),D=n(26),L=n.n(D),M=n(9),N=n.n(M),R=function(e){return Math.pow(2,e/12)},x=[R(-12),R(-10),R(-9),R(-7),R(-5),R(-4),R(-2),R(-1),R(0),R(2),R(3),R(5),R(7),R(8),R(10),R(11)],V=new N.a.Sound(P.a,(function(){})),A=new N.a.Sound(L.a,(function(){})),W=new N.a.Sound(I.a,(function(){})),_=new N.a.Sound(U.a,(function(){})),F=new N.a.Sound(C.a,(function(){}));function q(e){function t(e,t){e.stop(),e.attack=0,e.play(),e.sourceNode.playbackRate.value=t||1}var n=Object(a.useCallback)((function(n){if(n&&" "!==n){var a=Object(k.indexOf)(e.playableKeys,n),r=Object(k.indexOf)(e.playableKeys2,n);if(-1!==a)t(V,x[a]);else if(-1!==r)t(A,x[r]);else{var s=n.charCodeAt(0);t((s-1)%4===0?W:s%4===0?_:F,1+Math.floor(s/30))}}}),[e.playableKeys,e.playableKeys2]);return Object(a.useEffect)((function(){e.virtualKeys.forEach((function(e){n(e)}))}),[e.virtualKeys,n]),Object(a.useEffect)((function(){n(e.userKey)}),[e.userKey,n]),r.a.createElement(r.a.Fragment,null)}var B=function(e){Object(b.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={isPlaying:!1,currentPlayingLine:-1,playbackInterval:null,runInterval:null},a.handlePlay=a.handlePlay.bind(Object(d.a)(a)),a.handleStop=a.handleStop.bind(Object(d.a)(a)),a.handleLine=a.handleLine.bind(Object(d.a)(a)),a}return Object(y.a)(n,[{key:"componentWillUnmount",value:function(){this.state.playbackInterval&&clearInterval(this.state.playbackInterval),this.state.runInterval&&clearInterval(this.state.runInterval)}},{key:"handlePlay",value:function(){this.state.playbackInterval&&(clearInterval(this.state.playbackInterval),this.setState({playbackInterval:null})),this.handleLine(),this.setState({isPlaying:!0,playbackInterval:setInterval(this.handleLine,6e4/this.props.tempo)})}},{key:"handleStop",value:function(){clearInterval(this.state.playbackInterval),clearInterval(this.state.runInterval),this.setState({isPlaying:!1,currentPlayingLine:-1,playbackInterval:null,runInterval:null}),this.props.onVirtualKeys([])}},{key:"handleLine",value:function(){var e=this;this.runInterval&&(clearInterval(this.runInterval),this.setState({runInterval:null}));var t=this.props.tracks[0].code.split(/\r\n|\r|\n/),n=(this.state.currentPlayingLine+1)%t.length;this.setState({currentPlayingLine:n});var a=t[n];if(a.length>0&&(this.props.onVirtualKeys([a.charAt(0)]),this.props.onMarkerChange({line:n,char:0,show:!0}),a.length>1)){var r=6e4/this.props.tempo/a.length,s=0,l=setInterval((function(){(s+=1)<a.length&&(e.props.onVirtualKeys([a.charAt(s)]),e.props.onMarkerChange({line:n,char:s,show:!0}))}),r);this.setState({runInterval:l})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handlePlay},"Play"),r.a.createElement("button",{onClick:this.handleStop},"Stop"))}}]),n}(a.Component),H=["z","x","c","v","a","s","d","f","q","w","e","r","1","2","3","4"],J=["b","n","m",",","g","h","j","k","t","y","u","i","5","6","7","8"];var $=function(){var e=Object(a.useState)(120),t=Object(i.a)(e,1)[0],n=Object(a.useState)(0),s=Object(i.a)(n,1)[0],l=Object(a.useState)([]),o=Object(i.a)(l,2),c=o[0],u=o[1],h=Object(a.useState)(null),p=Object(i.a)(h,2),y=p[0],d=p[1],v=Object(a.useState)({line:0,char:0,show:!1}),b=Object(i.a)(v,2),f=b[0],k=b[1],K=Object(a.useState)([{type:"pitch",code:"q\n e\nd\n s\n s\nd f \nd  d\n 1"}]),O=Object(i.a)(K,2),j=O[0],I=O[1];return r.a.createElement("div",{className:"App"},r.a.createElement(m,{playableKeys:H,virtualKeys:c,onKeyDown:function(e){d(e)},onKeyUp:function(e){d(null)}}),r.a.createElement(B,{tempo:t,onVirtualKeys:u,tracks:j,onMarkerChange:k}),r.a.createElement(g,{code:j[s].code,onCodeChange:function(e){var t=j;t[s].code=e,I(t)},markerConfig:f}),r.a.createElement(q,{playableKeys:H,playableKeys2:J,userKey:y,virtualKeys:c}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.41c294da.chunk.js.map